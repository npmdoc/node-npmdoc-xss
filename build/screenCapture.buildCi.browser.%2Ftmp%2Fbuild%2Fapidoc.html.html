<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/leizongmin/js-xss">xss (v0.3.3)</a>
</h1>
<h4>Sanitize untrusted HTML (to prevent XSS) with a configuration specified by a Whitelist</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.xss">module xss</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.xss">
            function <span class="apidocSignatureSpan"></span>xss
            <span class="apidocSignatureSpan">(html, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.FilterXSS">
            function <span class="apidocSignatureSpan">xss.</span>FilterXSS
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.StripTagBody">
            function <span class="apidocSignatureSpan">xss.</span>StripTagBody
            <span class="apidocSignatureSpan">(tags, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.clearNonPrintableCharacter">
            function <span class="apidocSignatureSpan">xss.</span>clearNonPrintableCharacter
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.escapeAttrValue">
            function <span class="apidocSignatureSpan">xss.</span>escapeAttrValue
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.escapeDangerHtml5Entities">
            function <span class="apidocSignatureSpan">xss.</span>escapeDangerHtml5Entities
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.escapeHtml">
            function <span class="apidocSignatureSpan">xss.</span>escapeHtml
            <span class="apidocSignatureSpan">(html)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.escapeHtmlEntities">
            function <span class="apidocSignatureSpan">xss.</span>escapeHtmlEntities
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.escapeQuote">
            function <span class="apidocSignatureSpan">xss.</span>escapeQuote
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.friendlyAttrValue">
            function <span class="apidocSignatureSpan">xss.</span>friendlyAttrValue
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.getDefaultCSSWhiteList">
            function <span class="apidocSignatureSpan">xss.</span>getDefaultCSSWhiteList
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.getDefaultWhiteList">
            function <span class="apidocSignatureSpan">xss.</span>getDefaultWhiteList
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.onIgnoreTag">
            function <span class="apidocSignatureSpan">xss.</span>onIgnoreTag
            <span class="apidocSignatureSpan">(tag, html, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.onIgnoreTagAttr">
            function <span class="apidocSignatureSpan">xss.</span>onIgnoreTagAttr
            <span class="apidocSignatureSpan">(tag, name, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.onIgnoreTagStripAll">
            function <span class="apidocSignatureSpan">xss.</span>onIgnoreTagStripAll
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.onTag">
            function <span class="apidocSignatureSpan">xss.</span>onTag
            <span class="apidocSignatureSpan">(tag, html, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.onTagAttr">
            function <span class="apidocSignatureSpan">xss.</span>onTagAttr
            <span class="apidocSignatureSpan">(tag, name, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.parseAttr">
            function <span class="apidocSignatureSpan">xss.</span>parseAttr
            <span class="apidocSignatureSpan">(html, onAttr)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.parseTag">
            function <span class="apidocSignatureSpan">xss.</span>parseTag
            <span class="apidocSignatureSpan">(html, onTag, escapeHtml)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.safeAttrValue">
            function <span class="apidocSignatureSpan">xss.</span>safeAttrValue
            <span class="apidocSignatureSpan">(tag, name, value, cssFilter)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.stripBlankChar">
            function <span class="apidocSignatureSpan">xss.</span>stripBlankChar
            <span class="apidocSignatureSpan">(html)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.stripCommentTag">
            function <span class="apidocSignatureSpan">xss.</span>stripCommentTag
            <span class="apidocSignatureSpan">(html)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.unescapeQuote">
            function <span class="apidocSignatureSpan">xss.</span>unescapeQuote
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">xss.</span>FilterXSS.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">xss.</span>cssFilter</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">xss.</span>default</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">xss.</span>parser</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">xss.</span>util</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">xss.</span>whiteList</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.xss.FilterXSS">module xss.FilterXSS</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.FilterXSS.FilterXSS">
            function <span class="apidocSignatureSpan">xss.</span>FilterXSS
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.xss.FilterXSS.prototype">module xss.FilterXSS.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.FilterXSS.prototype.process">
            function <span class="apidocSignatureSpan">xss.FilterXSS.prototype.</span>process
            <span class="apidocSignatureSpan">(html)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.xss.default">module xss.default</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.default.StripTagBody">
            function <span class="apidocSignatureSpan">xss.default.</span>StripTagBody
            <span class="apidocSignatureSpan">(tags, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.default.clearNonPrintableCharacter">
            function <span class="apidocSignatureSpan">xss.default.</span>clearNonPrintableCharacter
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.default.escapeAttrValue">
            function <span class="apidocSignatureSpan">xss.default.</span>escapeAttrValue
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.default.escapeDangerHtml5Entities">
            function <span class="apidocSignatureSpan">xss.default.</span>escapeDangerHtml5Entities
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.default.escapeHtml">
            function <span class="apidocSignatureSpan">xss.default.</span>escapeHtml
            <span class="apidocSignatureSpan">(html)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.default.escapeHtmlEntities">
            function <span class="apidocSignatureSpan">xss.default.</span>escapeHtmlEntities
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.default.escapeQuote">
            function <span class="apidocSignatureSpan">xss.default.</span>escapeQuote
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.default.friendlyAttrValue">
            function <span class="apidocSignatureSpan">xss.default.</span>friendlyAttrValue
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.default.getDefaultCSSWhiteList">
            function <span class="apidocSignatureSpan">xss.default.</span>getDefaultCSSWhiteList
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.default.getDefaultWhiteList">
            function <span class="apidocSignatureSpan">xss.default.</span>getDefaultWhiteList
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.default.onIgnoreTag">
            function <span class="apidocSignatureSpan">xss.default.</span>onIgnoreTag
            <span class="apidocSignatureSpan">(tag, html, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.default.onIgnoreTagAttr">
            function <span class="apidocSignatureSpan">xss.default.</span>onIgnoreTagAttr
            <span class="apidocSignatureSpan">(tag, name, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.default.onIgnoreTagStripAll">
            function <span class="apidocSignatureSpan">xss.default.</span>onIgnoreTagStripAll
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.default.onTag">
            function <span class="apidocSignatureSpan">xss.default.</span>onTag
            <span class="apidocSignatureSpan">(tag, html, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.default.onTagAttr">
            function <span class="apidocSignatureSpan">xss.default.</span>onTagAttr
            <span class="apidocSignatureSpan">(tag, name, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.default.safeAttrValue">
            function <span class="apidocSignatureSpan">xss.default.</span>safeAttrValue
            <span class="apidocSignatureSpan">(tag, name, value, cssFilter)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.default.stripBlankChar">
            function <span class="apidocSignatureSpan">xss.default.</span>stripBlankChar
            <span class="apidocSignatureSpan">(html)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.default.stripCommentTag">
            function <span class="apidocSignatureSpan">xss.default.</span>stripCommentTag
            <span class="apidocSignatureSpan">(html)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.default.unescapeQuote">
            function <span class="apidocSignatureSpan">xss.default.</span>unescapeQuote
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">xss.default.</span>cssFilter</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">xss.default.</span>whiteList</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.xss.parser">module xss.parser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.parser.parseAttr">
            function <span class="apidocSignatureSpan">xss.parser.</span>parseAttr
            <span class="apidocSignatureSpan">(html, onAttr)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.parser.parseTag">
            function <span class="apidocSignatureSpan">xss.parser.</span>parseTag
            <span class="apidocSignatureSpan">(html, onTag, escapeHtml)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.xss.util">module xss.util</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.util.forEach">
            function <span class="apidocSignatureSpan">xss.util.</span>forEach
            <span class="apidocSignatureSpan">(arr, fn, scope)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.util.indexOf">
            function <span class="apidocSignatureSpan">xss.util.</span>indexOf
            <span class="apidocSignatureSpan">(arr, item)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.xss.util.trim">
            function <span class="apidocSignatureSpan">xss.util.</span>trim
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.xss" id="apidoc.module.xss">module xss</a></h1>


    <h2>
        <a href="#apidoc.element.xss.xss" id="apidoc.element.xss.xss">
        function <span class="apidocSignatureSpan"></span>xss
        <span class="apidocSignatureSpan">(html, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function filterXSS(html, options) {
  var xss = new FilterXSS(options);
  return xss.process(html);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.FilterXSS" id="apidoc.element.xss.FilterXSS">
        function <span class="apidocSignatureSpan">xss.</span>FilterXSS
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function FilterXSS(options) {
  options = shallowCopyObject(options || {});

  if (options.stripIgnoreTag) {
    if (options.onIgnoreTag) {
      console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time');
    }
    options.onIgnoreTag = DEFAULT.onIgnoreTagStripAll;
  }

  options.whiteList = options.whiteList || DEFAULT.whiteList;
  options.onTag = options.onTag || DEFAULT.onTag;
  options.onTagAttr = options.onTagAttr || DEFAULT.onTagAttr;
  options.onIgnoreTag = options.onIgnoreTag || DEFAULT.onIgnoreTag;
  options.onIgnoreTagAttr = options.onIgnoreTagAttr || DEFAULT.onIgnoreTagAttr;
  options.safeAttrValue = options.safeAttrValue || DEFAULT.safeAttrValue;
  options.escapeHtml = options.escapeHtml || DEFAULT.escapeHtml;
  this.options = options;

  if (options.css === false) {
    this.cssFilter = false;
  } else {
    options.css = options.css || {};
    this.cssFilter = new FilterCSS(options.css);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

To avoid passing `options` every time, you can also do it in a faster way by
creating a `FilterXSS` instance:

```javascript
options = {};  // Custom rules
myxss = new xss.<span class="apidocCodeKeywordSpan">FilterXSS</span>(options);
// then apply myxss.process()
html = myxss.process('&lt;script&gt;alert("xss");&lt;/script&gt;');
```

Details of parameters in `options` would be described below.

### Whitelist
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.StripTagBody" id="apidoc.element.xss.StripTagBody">
        function <span class="apidocSignatureSpan">xss.</span>StripTagBody
        <span class="apidocSignatureSpan">(tags, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StripTagBody(tags, next) {
  if (typeof(next) !== 'function') {
    next = function () {};
  }

  var isRemoveAllTag = !Array.isArray(tags);
  function isRemoveTag (tag) {
    if (isRemoveAllTag) return true;
    return (_.indexOf(tags, tag) !== -1);
  }

  var removeList = [];   // è¦åˆ&nbsp;é™¤çš„ä½ç½®èŒƒå›´åˆ—è¡¨
  var posStart = false;  // å½“å‰æ&nbsp;‡ç­¾å¼€å§‹ä½ç½®

  return {
    onIgnoreTag: function (tag, html, options) {
      if (isRemoveTag(tag)) {
        if (options.isClosing) {
          var ret = '[/removed]';
          var end = options.position + ret.length;
          removeList.push([posStart !== false ? posStart : options.position, end]);
          posStart = false;
          return ret;
        } else {
          if (!posStart) {
            posStart = options.position;
          }
          return '[removed]';
        }
      } else {
        return next(tag, html, options);
      }
    },
    remove: function (html) {
      var rethtml = '';
      var lastPos = 0;
      _.forEach(removeList, function (pos) {
        rethtml += html.slice(lastPos, pos[0]);
        lastPos = pos[1];
      });
      rethtml += html.slice(lastPos);
      return rethtml;
    }
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.clearNonPrintableCharacter" id="apidoc.element.xss.clearNonPrintableCharacter">
        function <span class="apidocSignatureSpan">xss.</span>clearNonPrintableCharacter
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function clearNonPrintableCharacter(str) {
  var str2 = '';
  for (var i = 0, len = str.length; i &lt; len; i++) {
    str2 += str.charCodeAt(i) &lt; 32 ? ' ' : str.charAt(i);
  }
  return _.trim(str2);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.escapeAttrValue" id="apidoc.element.xss.escapeAttrValue">
        function <span class="apidocSignatureSpan">xss.</span>escapeAttrValue
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeAttrValue(str) {
  str = escapeQuote(str);
  str = escapeHtml(str);
  return str;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```javascript
var source = '&lt;div a="1" b="2" data-a="3" data-b="4"&gt;hello&lt;/div&gt;
;';
var html = xss(source, {
  onIgnoreTagAttr: function (tag, name, value, isWhiteAttr) {
    if (name.substr(0, 5) === 'data-') {
      // escape its value using built-in escapeAttrValue function
      return name + '="' + xss.<span class="apidocCodeKeywordSpan">escapeAttrValue</span>(value) + '"&amp;#
x27;;
    }
  }
});

console.log('%s\nconvert to:\n%s', source, html);
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.escapeDangerHtml5Entities" id="apidoc.element.xss.escapeDangerHtml5Entities">
        function <span class="apidocSignatureSpan">xss.</span>escapeDangerHtml5Entities
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeDangerHtml5Entities(str) {
  return str.replace(REGEXP_ATTR_VALUE_COLON, ':')
            .replace(REGEXP_ATTR_VALUE_NEWLINE, ' ');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.escapeHtml" id="apidoc.element.xss.escapeHtml">
        function <span class="apidocSignatureSpan">xss.</span>escapeHtml
        <span class="apidocSignatureSpan">(html)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeHtml(html) {
  return html.replace(REGEXP_LT, '&amp;lt;').replace(REGEXP_GT, '&amp;gt;');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.escapeHtmlEntities" id="apidoc.element.xss.escapeHtmlEntities">
        function <span class="apidocSignatureSpan">xss.</span>escapeHtmlEntities
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeHtmlEntities(str) {
  return str.replace(REGEXP_ATTR_VALUE_1, function replaceUnicode (str, code) {
    return (code[0] === 'x' || code[0] === 'X')
            ? String.fromCharCode(parseInt(code.substr(1), 16))
            : String.fromCharCode(parseInt(code, 10));
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.escapeQuote" id="apidoc.element.xss.escapeQuote">
        function <span class="apidocSignatureSpan">xss.</span>escapeQuote
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeQuote(str) {
  return str.replace(REGEXP_QUOTE, '&amp;quot;');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.friendlyAttrValue" id="apidoc.element.xss.friendlyAttrValue">
        function <span class="apidocSignatureSpan">xss.</span>friendlyAttrValue
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function friendlyAttrValue(str) {
  str = unescapeQuote(str);             // åŒå¼•å·
  str = escapeHtmlEntities(str);         // è½¬æ¢HTMLå®žä½“ç¼–ç&nbsp;
  str = escapeDangerHtml5Entities(str);  // è½¬æ¢å±é™©çš„HTML5æ–°å¢žå®žä½“ç¼–ç&nbsp;
  str = clearNonPrintableCharacter(str); // æ¸…é™¤ä¸å¯è§å­—ç¬¦
  return str;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var list = [];
var html = xss(source, {
  onTagAttr: function (tag, name, value, isWhiteAttr) {
    if (tag === 'img' &amp;&amp; name === 'src') {
      // Use the built-in friendlyAttrValue function to escape attribute
      // values. It supports converting entity tags such as &amp;lt; to printable
      // characters such as &lt;
      list.push(xss.<span class="apidocCodeKeywordSpan">friendlyAttrValue</span>(value));
    }
    // Return nothing, means keep the default handling measure
  }
});

console.log('image list:\n%s', list.join(', '));
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.getDefaultCSSWhiteList" id="apidoc.element.xss.getDefaultCSSWhiteList">
        function <span class="apidocSignatureSpan">xss.</span>getDefaultCSSWhiteList
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getDefaultWhiteList() {
  // ç™½åå•å€¼è¯´æ˜Žï¼š
  // true: å…è®¸è¯¥å±žæ€§
  // Function: function (val) { } è¿”å›žtrueè¡¨ç¤ºå…è®¸è¯¥å±žæ€§ï¼Œå…¶ä»–å€¼å‡è¡¨ç¤ºä¸å…è®¸
  // RegExp: regexp.test(val) è¿”å›žtrueè¡¨ç¤ºå…è®¸è¯¥å±žæ€§ï¼Œå…¶ä»–å€¼å‡è¡¨ç¤ºä¸å…è®¸
  // é™¤ä¸Šé¢åˆ—å‡ºçš„å€¼å¤–å‡è¡¨ç¤ºä¸å…è®¸
  var whiteList = {};

  whiteList['align-content'] = false; // default: auto
  whiteList['align-items'] = false; // default: auto
  whiteList['align-self'] = false; // default: auto
  whiteList['alignment-adjust'] = false; // default: auto
  whiteList['alignment-baseline'] = false; // default: baseline
  whiteList['all'] = false; // default: depending on individual properties
  whiteList['anchor-point'] = false; // default: none
  whiteList['animation'] = false; // default: depending on individual properties
  whiteList['animation-delay'] = false; // default: 0
  whiteList['animation-direction'] = false; // default: normal
  whiteList['animation-duration'] = false; // default: 0
  whiteList['animation-fill-mode'] = false; // default: none
  whiteList['animation-iteration-count'] = false; // default: 1
  whiteList['animation-name'] = false; // default: none
  whiteList['animation-play-state'] = false; // default: running
  whiteList['animation-timing-function'] = false; // default: ease
  whiteList['azimuth'] = false; // default: center
  whiteList['backface-visibility'] = false; // default: visible
  whiteList['background'] = true; // default: depending on individual properties
  whiteList['background-attachment'] = true; // default: scroll
  whiteList['background-clip'] = true; // default: border-box
  whiteList['background-color'] = true; // default: transparent
  whiteList['background-image'] = true; // default: none
  whiteList['background-origin'] = true; // default: padding-box
  whiteList['background-position'] = true; // default: 0% 0%
  whiteList['background-repeat'] = true; // default: repeat
  whiteList['background-size'] = true; // default: auto
  whiteList['baseline-shift'] = false; // default: baseline
  whiteList['binding'] = false; // default: none
  whiteList['bleed'] = false; // default: 6pt
  whiteList['bookmark-label'] = false; // default: content()
  whiteList['bookmark-level'] = false; // default: none
  whiteList['bookmark-state'] = false; // default: open
  whiteList['border'] = true; // default: depending on individual properties
  whiteList['border-bottom'] = true; // default: depending on individual properties
  whiteList['border-bottom-color'] = true; // default: current color
  whiteList['border-bottom-left-radius'] = true; // default: 0
  whiteList['border-bottom-right-radius'] = true; // default: 0
  whiteList['border-bottom-style'] = true; // default: none
  whiteList['border-bottom-width'] = true; // default: medium
  whiteList['border-collapse'] = true; // default: separate
  whiteList['border-color'] = true; // default: depending on individual properties
  whiteList['border-image'] = true; // default: none
  whiteList['border-image-outset'] = true; // default: 0
  whiteList['border-image-repeat'] = true; // default: stretch
  whiteList['border-image-slice'] = true; // default: 100%
  whiteList['border-image-source'] = true; // default: none
  whiteList['border-image-width'] = true; // default: 1
  whiteList['border-left'] = true; // default: depending on individual properties
  whiteList['border-left-color'] = true; // default: current color
  whiteList['border-left-style'] = true; // default: none
  whiteList['border-left-width'] = true; // default: medium
  whiteList['border-radius'] = true; // default: 0
  whiteList['border-right'] = true; // default: depending on individual properties
  whiteList['border-right-color'] = true; // default: current color
  whiteList['border-right-style'] = true; // default: none
  whiteList['border-right-width'] = true; // default: medium
  whiteList['border-spacing'] = true; // default: 0
  whiteList['border-style'] = true; // default: depending on individual properties
  whiteList['border-top'] = true; // default: depending on individual properties
  whiteList['border-top-color'] = true; // default: current color
  whiteList['border-top-left-radius'] = true; ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.getDefaultWhiteList" id="apidoc.element.xss.getDefaultWhiteList">
        function <span class="apidocSignatureSpan">xss.</span>getDefaultWhiteList
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getDefaultWhiteList() {
  return {
    a:      ['target', 'href', 'title'],
    abbr:   ['title'],
    address: [],
    area:   ['shape', 'coords', 'href', 'alt'],
    article: [],
    aside:  [],
    audio:  ['autoplay', 'controls', 'loop', 'preload', 'src'],
    b:      [],
    bdi:    ['dir'],
    bdo:    ['dir'],
    big:    [],
    blockquote: ['cite'],
    br:     [],
    caption: [],
    center: [],
    cite:   [],
    code:   [],
    col:    ['align', 'valign', 'span', 'width'],
    colgroup: ['align', 'valign', 'span', 'width'],
    dd:     [],
    del:    ['datetime'],
    details: ['open'],
    div:    [],
    dl:     [],
    dt:     [],
    em:     [],
    font:   ['color', 'size', 'face'],
    footer: [],
    h1:     [],
    h2:     [],
    h3:     [],
    h4:     [],
    h5:     [],
    h6:     [],
    header: [],
    hr:     [],
    i:      [],
    img:    ['src', 'alt', 'title', 'width', 'height'],
    ins:    ['datetime'],
    li:     [],
    mark:   [],
    nav:    [],
    ol:     [],
    p:      [],
    pre:    [],
    s:      [],
    section:[],
    small:  [],
    span:   [],
    sub:    [],
    sup:    [],
    strong: [],
    table:  ['width', 'border', 'align', 'valign'],
    tbody:  ['align', 'valign'],
    td:     ['width', 'rowspan', 'colspan', 'align', 'valign'],
    tfoot:  ['align', 'valign'],
    th:     ['width', 'rowspan', 'colspan', 'align', 'valign'],
    thead:  ['align', 'valign'],
    tr:     ['rowspan', 'align', 'valign'],
    tt:     [],
    u:      [],
    ul:     [],
    video:  ['autoplay', 'controls', 'loop', 'preload', 'src', 'height', 'width']
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.onIgnoreTag" id="apidoc.element.xss.onIgnoreTag">
        function <span class="apidocSignatureSpan">xss.</span>onIgnoreTag
        <span class="apidocSignatureSpan">(tag, html, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function onIgnoreTag(tag, html, options) {
  // do nothing
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.onIgnoreTagAttr" id="apidoc.element.xss.onIgnoreTagAttr">
        function <span class="apidocSignatureSpan">xss.</span>onIgnoreTagAttr
        <span class="apidocSignatureSpan">(tag, name, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function onIgnoreTagAttr(tag, name, value) {
  // do nothing
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.onIgnoreTagStripAll" id="apidoc.element.xss.onIgnoreTagStripAll">
        function <span class="apidocSignatureSpan">xss.</span>onIgnoreTagStripAll
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function onIgnoreTagStripAll() {
  return '';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.onTag" id="apidoc.element.xss.onTag">
        function <span class="apidocSignatureSpan">xss.</span>onTag
        <span class="apidocSignatureSpan">(tag, html, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function onTag(tag, html, options) {
  // do nothing
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.onTagAttr" id="apidoc.element.xss.onTagAttr">
        function <span class="apidocSignatureSpan">xss.</span>onTagAttr
        <span class="apidocSignatureSpan">(tag, name, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function onTagAttr(tag, name, value) {
  // do nothing
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.parseAttr" id="apidoc.element.xss.parseAttr">
        function <span class="apidocSignatureSpan">xss.</span>parseAttr
        <span class="apidocSignatureSpan">(html, onAttr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parseAttr(html, onAttr) {
  'user strict';

  var lastPos = 0;        // å½“å‰ä½ç½®
  var retAttrs = [];      // å¾…è¿”å›žçš„å±žæ€§åˆ—è¡¨
  var tmpName = false;    // ä¸´æ—¶å±žæ€§åç§°
  var len = html.length;  // HTMLä»£ç&nbsp;é•¿åº¦

  function addAttr (name, value) {
    name = _.trim(name);
    name = name.replace(REGEXP_ATTR_NAME, '').toLowerCase();
    if (name.length &lt; 1) return;
    var ret = onAttr(name, value || '');
    if (ret) retAttrs.push(ret);
  };

  // é€ä¸ªåˆ†æžå­—ç¬¦
  for (var i = 0; i &lt; len; i++) {
    var c = html.charAt(i);
    var v, j;
    if (tmpName === false &amp;&amp; c === '=') {
      tmpName = html.slice(lastPos, i);
      lastPos = i + 1;
      continue;
    }
    if (tmpName !== false) {
      // HTMLæ&nbsp;‡ç­¾å†…çš„å¼•å·ä»…å½“å‰ä¸€ä¸ªå­—ç¬¦æ˜¯ç­‰äºŽå·æ—¶æ‰æœ‰æ•ˆ
      if (i === lastPos &amp;&amp; (c === '"' || c === "'") &amp;&amp; html.charAt(i - 1) === '=') {
        j = html.indexOf(c, i + 1);
        if (j === -1) {
          break;
        } else {
          v = _.trim(html.slice(lastPos + 1, j));
          addAttr(tmpName, v);
          tmpName = false;
          i = j;
          lastPos = i + 1;
          continue;
        }
      }
    }
    if (c === ' ') {
      if (tmpName === false) {
        j = findNextEqual(html, i);
        if (j === -1) {
          v = _.trim(html.slice(lastPos, i));
          addAttr(v);
          tmpName = false;
          lastPos = i + 1;
          continue;
        } else {
          i = j - 1;
          continue;
        }
      } else {
        j = findBeforeEqual(html, i - 1);
        if (j === -1) {
          v = _.trim(html.slice(lastPos, i));
          v = stripQuoteWrap(v);
          addAttr(tmpName, v);
          tmpName = false;
          lastPos = i + 1;
          continue;
        } else {
          continue;
        }
      }
    }
  }

  if (lastPos &lt; html.length) {
    if (tmpName === false) {
      addAttr(html.slice(lastPos));
    } else {
      addAttr(tmpName, stripQuoteWrap(_.trim(html.slice(lastPos))));
    }
  }

  return _.trim(retAttrs.join(' '));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.parseTag" id="apidoc.element.xss.parseTag">
        function <span class="apidocSignatureSpan">xss.</span>parseTag
        <span class="apidocSignatureSpan">(html, onTag, escapeHtml)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parseTag(html, onTag, escapeHtml) {
  'user strict';

  var rethtml = '';        // å¾…è¿”å›žçš„HTML
  var lastPos = 0;         // ä¸Šä¸€ä¸ªæ&nbsp;‡ç­¾ç»“æŸä½ç½®
  var tagStart = false;    // å½“å‰æ&nbsp;‡ç­¾å¼€å§‹ä½ç½®
  var quoteStart = false;  // å¼•å·å¼€å§‹ä½ç½®
  var currentPos = 0;      // å½“å‰ä½ç½®
  var len = html.length;   // HTMLé•¿åº¦
  var currentHtml = '';    // å½“å‰æ&nbsp;‡ç­¾çš„HTMLä»£ç&nbsp;
  var currentTagName = ''; // å½“å‰æ&nbsp;‡ç­¾çš„åç§°

  // é€ä¸ªåˆ†æžå­—ç¬¦
  for (currentPos = 0; currentPos &lt; len; currentPos++) {
    var c = html.charAt(currentPos);
    if (tagStart === false) {
      if (c === '&lt;') {
        tagStart = currentPos;
        continue;
      }
    } else {
      if (quoteStart === false) {
        if (c === '&lt;') {
          rethtml += escapeHtml(html.slice(lastPos, currentPos));
          tagStart = currentPos;
          lastPos = currentPos;
          continue;
        }
        if (c === '&gt;') {
          rethtml += escapeHtml(html.slice(lastPos, tagStart));
          currentHtml = html.slice(tagStart, currentPos + 1);
          currentTagName = getTagName(currentHtml);
          rethtml += onTag(tagStart,
                           rethtml.length,
                           currentTagName,
                           currentHtml,
                           isClosing(currentHtml));
          lastPos = currentPos + 1;
          tagStart = false;
          continue;
        }
        // HTMLæ&nbsp;‡ç­¾å†…çš„å¼•å·ä»…å½“å‰ä¸€ä¸ªå­—ç¬¦æ˜¯ç­‰äºŽå·æ—¶æ‰æœ‰æ•ˆ
        if ((c === '"' || c === "'") &amp;&amp; html.charAt(currentPos - 1) === '=') {
          quoteStart = c;
          continue;
        }
      } else {
        if (c === quoteStart) {
          quoteStart = false;
          continue;
        }
      }
    }
  }
  if (lastPos &lt; html.length) {
    rethtml += escapeHtml(html.substr(lastPos));
  }

  return rethtml;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.safeAttrValue" id="apidoc.element.xss.safeAttrValue">
        function <span class="apidocSignatureSpan">xss.</span>safeAttrValue
        <span class="apidocSignatureSpan">(tag, name, value, cssFilter)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function safeAttrValue(tag, name, value, cssFilter) {
  // è½¬æ¢ä¸ºå‹å¥½çš„å±žæ€§å€¼ï¼Œå†åšåˆ¤æ–­
  value = friendlyAttrValue(value);

  if (name === 'href' || name === 'src') {
    // è¿‡æ»¤ href å’Œ src å±žæ€§
    // ä»…å…è®¸ http:// | https:// | mailto: | / | # å¼€å¤´çš„åœ°å€
    value = _.trim(value);
    if (value === '#') return '#';
    if (!(value.substr(0, 7) === 'http://' ||
         value.substr(0, 8) === 'https://' ||
         value.substr(0, 7) === 'mailto:' ||
         value[0] === '#' ||
         value[0] === '/')) {
      return '';
    }
  } else if (name === 'background') {
    // è¿‡æ»¤ background å±žæ€§ ï¼ˆè¿™ä¸ªxssæ¼æ´žè¾ƒè€äº†ï¼Œå¯èƒ½å·²ç»ä¸é€‚ç”¨ï¼‰
    // javascript:
    REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {
      return '';
    }
  } else if (name === 'style') {
    //<span class="apidocCodeCommentSpan"> /*æ³¨é‡Š*/
</span>    /*REGEXP_DEFAULT_ON_TAG_ATTR_3.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_3.test(value)) {
      return '';
    }*/
    // expression()
    REGEXP_DEFAULT_ON_TAG_ATTR_7.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_7.test(value)) {
      return '';
    }
    // url()
    REGEXP_DEFAULT_ON_TAG_ATTR_8.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_8.test(value)) {
      REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;
      if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {
        return '';
      }
    }
    if (cssFilter !== false) {
      cssFilter = cssFilter || defaultCSSFilter;
      value = cssFilter.process(value);
    }
  }

  // è¾“å‡ºæ—¶éœ€è¦è½¬ä¹‰&lt;&gt;"
  value = escapeAttrValue(value);
  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.stripBlankChar" id="apidoc.element.xss.stripBlankChar">
        function <span class="apidocSignatureSpan">xss.</span>stripBlankChar
        <span class="apidocSignatureSpan">(html)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripBlankChar(html) {
  var chars = html.split('');
  chars = chars.filter(function (char) {
    var c = char.charCodeAt(0);
    if (c === 127) return false;
    if (c &lt;= 31) {
      if (c === 10 || c === 13) return true;
      return false;
    }
    return true;
  });
  return chars.join('');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.stripCommentTag" id="apidoc.element.xss.stripCommentTag">
        function <span class="apidocSignatureSpan">xss.</span>stripCommentTag
        <span class="apidocSignatureSpan">(html)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripCommentTag(html) {
  return html.replace(STRIP_COMMENT_TAG_REGEXP, '');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.unescapeQuote" id="apidoc.element.xss.unescapeQuote">
        function <span class="apidocSignatureSpan">xss.</span>unescapeQuote
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function unescapeQuote(str) {
  return str.replace(REGEXP_QUOTE_2, '"');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>














</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.xss.FilterXSS" id="apidoc.module.xss.FilterXSS">module xss.FilterXSS</a></h1>


    <h2>
        <a href="#apidoc.element.xss.FilterXSS.FilterXSS" id="apidoc.element.xss.FilterXSS.FilterXSS">
        function <span class="apidocSignatureSpan">xss.</span>FilterXSS
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function FilterXSS(options) {
  options = shallowCopyObject(options || {});

  if (options.stripIgnoreTag) {
    if (options.onIgnoreTag) {
      console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time');
    }
    options.onIgnoreTag = DEFAULT.onIgnoreTagStripAll;
  }

  options.whiteList = options.whiteList || DEFAULT.whiteList;
  options.onTag = options.onTag || DEFAULT.onTag;
  options.onTagAttr = options.onTagAttr || DEFAULT.onTagAttr;
  options.onIgnoreTag = options.onIgnoreTag || DEFAULT.onIgnoreTag;
  options.onIgnoreTagAttr = options.onIgnoreTagAttr || DEFAULT.onIgnoreTagAttr;
  options.safeAttrValue = options.safeAttrValue || DEFAULT.safeAttrValue;
  options.escapeHtml = options.escapeHtml || DEFAULT.escapeHtml;
  this.options = options;

  if (options.css === false) {
    this.cssFilter = false;
  } else {
    options.css = options.css || {};
    this.cssFilter = new FilterCSS(options.css);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

To avoid passing `options` every time, you can also do it in a faster way by
creating a `FilterXSS` instance:

```javascript
options = {};  // Custom rules
myxss = new xss.<span class="apidocCodeKeywordSpan">FilterXSS</span>(options);
// then apply myxss.process()
html = myxss.process('&lt;script&gt;alert("xss");&lt;/script&gt;');
```

Details of parameters in `options` would be described below.

### Whitelist
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.xss.FilterXSS.prototype" id="apidoc.module.xss.FilterXSS.prototype">module xss.FilterXSS.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.xss.FilterXSS.prototype.process" id="apidoc.element.xss.FilterXSS.prototype.process">
        function <span class="apidocSignatureSpan">xss.FilterXSS.prototype.</span>process
        <span class="apidocSignatureSpan">(html)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">process = function (html) {
  // å…¼å®¹å„ç§å¥‡è‘©è¾“å…¥
  html = html || '';
  html = html.toString();
  if (!html) return '';

  var me = this;
  var options = me.options;
  var whiteList = options.whiteList;
  var onTag = options.onTag;
  var onIgnoreTag = options.onIgnoreTag;
  var onTagAttr = options.onTagAttr;
  var onIgnoreTagAttr = options.onIgnoreTagAttr;
  var safeAttrValue = options.safeAttrValue;
  var escapeHtml = options.escapeHtml;
  var cssFilter = me.cssFilter;

  // æ˜¯å¦æ¸…é™¤ä¸å¯è§å­—ç¬¦
  if (options.stripBlankChar) {
    html = DEFAULT.stripBlankChar(html);
  }

  // æ˜¯å¦ç¦æ­¢å¤‡æ³¨æ&nbsp;‡ç­¾
  if (!options.allowCommentTag) {
    html = DEFAULT.stripCommentTag(html);
  }

  // å¦‚æžœå¼€å¯äº†stripIgnoreTagBody
  var stripIgnoreTagBody = false;
  if (options.stripIgnoreTagBody) {
    var stripIgnoreTagBody = DEFAULT.StripTagBody(options.stripIgnoreTagBody, onIgnoreTag);
    onIgnoreTag = stripIgnoreTagBody.onIgnoreTag;
  }

  var retHtml = parseTag(html, function (sourcePosition, position, tag, html, isClosing) {
    var info = {
      sourcePosition: sourcePosition,
      position:       position,
      isClosing:      isClosing,
      isWhite:        (tag in whiteList)
    };

    // è°ƒç”¨onTagå¤„ç†
    var ret = onTag(tag, html, info);
    if (!isNull(ret)) return ret;

    // é»˜è®¤æ&nbsp;‡ç­¾å¤„ç†æ–¹æ³•
    if (info.isWhite) {
      // ç™½åå•æ&nbsp;‡ç­¾ï¼Œè§£æžæ&nbsp;‡ç­¾å±žæ€§
      // å¦‚æžœæ˜¯é—­åˆæ&nbsp;‡ç­¾ï¼Œåˆ™ä¸éœ€è¦è§£æžå±žæ€§
      if (info.isClosing) {
        return '&lt;/' + tag + '&gt;';
      }

      var attrs = getAttrs(html);
      var whiteAttrList = whiteList[tag];
      var attrsHtml = parseAttr(attrs.html, function (name, value) {

        // è°ƒç”¨onTagAttrå¤„ç†
        var isWhiteAttr = (_.indexOf(whiteAttrList, name) !== -1);
        var ret = onTagAttr(tag, name, value, isWhiteAttr);
        if (!isNull(ret)) return ret;

        // é»˜è®¤çš„å±žæ€§å¤„ç†æ–¹æ³•
        if (isWhiteAttr) {
          // ç™½åå•å±žæ€§ï¼Œè°ƒç”¨safeAttrValueè¿‡æ»¤å±žæ€§å€¼
          value = safeAttrValue(tag, name, value, cssFilter);
          if (value) {
            return name + '="' + value + '"';
          } else {
            return name;
          }
        } else {
          // éžç™½åå•å±žæ€§ï¼Œè°ƒç”¨onIgnoreTagAttrå¤„ç†
          var ret = onIgnoreTagAttr(tag, name, value, isWhiteAttr);
          if (!isNull(ret)) return ret;
          return;
        }
      });

      // æž„é€&nbsp;æ–°çš„æ&nbsp;‡ç­¾ä»£ç&nbsp;
      var html = '&lt;' + tag;
      if (attrsHtml) html += ' ' + attrsHtml;
      if (attrs.closing) html += ' /';
      html += '&gt;';
      return html;

    } else {
      // éžç™½åå•æ&nbsp;‡ç­¾ï¼Œè°ƒç”¨onIgnoreTagå¤„ç†
      var ret = onIgnoreTag(tag, html, info);
      if (!isNull(ret)) return ret;
      return escapeHtml(html);
    }

  }, escapeHtml);

  // å¦‚æžœå¼€å¯äº†stripIgnoreTagBodyï¼Œéœ€è¦å¯¹ç»“æžœå†è¿›è¡Œå¤„ç†
  if (stripIgnoreTagBody) {
    retHtml = stripIgnoreTagBody.remove(retHtml);
  }

  return retHtml;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

To avoid passing `options` every time, you can also do it in a faster way by
creating a `FilterXSS` instance:

```javascript
options = {};  // Custom rules
myxss = new xss.FilterXSS(options);
// then apply myxss.<span class="apidocCodeKeywordSpan">process</span>()
html = myxss.process('&lt;script&gt;alert("xss");&lt;/script&gt;');
```

Details of parameters in `options` would be described below.

### Whitelist
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.xss.default" id="apidoc.module.xss.default">module xss.default</a></h1>


    <h2>
        <a href="#apidoc.element.xss.default.StripTagBody" id="apidoc.element.xss.default.StripTagBody">
        function <span class="apidocSignatureSpan">xss.default.</span>StripTagBody
        <span class="apidocSignatureSpan">(tags, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StripTagBody(tags, next) {
  if (typeof(next) !== 'function') {
    next = function () {};
  }

  var isRemoveAllTag = !Array.isArray(tags);
  function isRemoveTag (tag) {
    if (isRemoveAllTag) return true;
    return (_.indexOf(tags, tag) !== -1);
  }

  var removeList = [];   // è¦åˆ&nbsp;é™¤çš„ä½ç½®èŒƒå›´åˆ—è¡¨
  var posStart = false;  // å½“å‰æ&nbsp;‡ç­¾å¼€å§‹ä½ç½®

  return {
    onIgnoreTag: function (tag, html, options) {
      if (isRemoveTag(tag)) {
        if (options.isClosing) {
          var ret = '[/removed]';
          var end = options.position + ret.length;
          removeList.push([posStart !== false ? posStart : options.position, end]);
          posStart = false;
          return ret;
        } else {
          if (!posStart) {
            posStart = options.position;
          }
          return '[removed]';
        }
      } else {
        return next(tag, html, options);
      }
    },
    remove: function (html) {
      var rethtml = '';
      var lastPos = 0;
      _.forEach(removeList, function (pos) {
        rethtml += html.slice(lastPos, pos[0]);
        lastPos = pos[1];
      });
      rethtml += html.slice(lastPos);
      return rethtml;
    }
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.default.clearNonPrintableCharacter" id="apidoc.element.xss.default.clearNonPrintableCharacter">
        function <span class="apidocSignatureSpan">xss.default.</span>clearNonPrintableCharacter
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function clearNonPrintableCharacter(str) {
  var str2 = '';
  for (var i = 0, len = str.length; i &lt; len; i++) {
    str2 += str.charCodeAt(i) &lt; 32 ? ' ' : str.charAt(i);
  }
  return _.trim(str2);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.default.escapeAttrValue" id="apidoc.element.xss.default.escapeAttrValue">
        function <span class="apidocSignatureSpan">xss.default.</span>escapeAttrValue
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeAttrValue(str) {
  str = escapeQuote(str);
  str = escapeHtml(str);
  return str;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```javascript
var source = '&lt;div a="1" b="2" data-a="3" data-b="4"&gt;hello&lt;/div&gt;
;';
var html = xss(source, {
  onIgnoreTagAttr: function (tag, name, value, isWhiteAttr) {
    if (name.substr(0, 5) === 'data-') {
      // escape its value using built-in escapeAttrValue function
      return name + '="' + xss.<span class="apidocCodeKeywordSpan">escapeAttrValue</span>(value) + '"&amp;#
x27;;
    }
  }
});

console.log('%s\nconvert to:\n%s', source, html);
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.default.escapeDangerHtml5Entities" id="apidoc.element.xss.default.escapeDangerHtml5Entities">
        function <span class="apidocSignatureSpan">xss.default.</span>escapeDangerHtml5Entities
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeDangerHtml5Entities(str) {
  return str.replace(REGEXP_ATTR_VALUE_COLON, ':')
            .replace(REGEXP_ATTR_VALUE_NEWLINE, ' ');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.default.escapeHtml" id="apidoc.element.xss.default.escapeHtml">
        function <span class="apidocSignatureSpan">xss.default.</span>escapeHtml
        <span class="apidocSignatureSpan">(html)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeHtml(html) {
  return html.replace(REGEXP_LT, '&amp;lt;').replace(REGEXP_GT, '&amp;gt;');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.default.escapeHtmlEntities" id="apidoc.element.xss.default.escapeHtmlEntities">
        function <span class="apidocSignatureSpan">xss.default.</span>escapeHtmlEntities
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeHtmlEntities(str) {
  return str.replace(REGEXP_ATTR_VALUE_1, function replaceUnicode (str, code) {
    return (code[0] === 'x' || code[0] === 'X')
            ? String.fromCharCode(parseInt(code.substr(1), 16))
            : String.fromCharCode(parseInt(code, 10));
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.default.escapeQuote" id="apidoc.element.xss.default.escapeQuote">
        function <span class="apidocSignatureSpan">xss.default.</span>escapeQuote
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeQuote(str) {
  return str.replace(REGEXP_QUOTE, '&amp;quot;');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.default.friendlyAttrValue" id="apidoc.element.xss.default.friendlyAttrValue">
        function <span class="apidocSignatureSpan">xss.default.</span>friendlyAttrValue
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function friendlyAttrValue(str) {
  str = unescapeQuote(str);             // åŒå¼•å·
  str = escapeHtmlEntities(str);         // è½¬æ¢HTMLå®žä½“ç¼–ç&nbsp;
  str = escapeDangerHtml5Entities(str);  // è½¬æ¢å±é™©çš„HTML5æ–°å¢žå®žä½“ç¼–ç&nbsp;
  str = clearNonPrintableCharacter(str); // æ¸…é™¤ä¸å¯è§å­—ç¬¦
  return str;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var list = [];
var html = xss(source, {
  onTagAttr: function (tag, name, value, isWhiteAttr) {
    if (tag === 'img' &amp;&amp; name === 'src') {
      // Use the built-in friendlyAttrValue function to escape attribute
      // values. It supports converting entity tags such as &amp;lt; to printable
      // characters such as &lt;
      list.push(xss.<span class="apidocCodeKeywordSpan">friendlyAttrValue</span>(value));
    }
    // Return nothing, means keep the default handling measure
  }
});

console.log('image list:\n%s', list.join(', '));
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.default.getDefaultCSSWhiteList" id="apidoc.element.xss.default.getDefaultCSSWhiteList">
        function <span class="apidocSignatureSpan">xss.default.</span>getDefaultCSSWhiteList
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getDefaultWhiteList() {
  // ç™½åå•å€¼è¯´æ˜Žï¼š
  // true: å…è®¸è¯¥å±žæ€§
  // Function: function (val) { } è¿”å›žtrueè¡¨ç¤ºå…è®¸è¯¥å±žæ€§ï¼Œå…¶ä»–å€¼å‡è¡¨ç¤ºä¸å…è®¸
  // RegExp: regexp.test(val) è¿”å›žtrueè¡¨ç¤ºå…è®¸è¯¥å±žæ€§ï¼Œå…¶ä»–å€¼å‡è¡¨ç¤ºä¸å…è®¸
  // é™¤ä¸Šé¢åˆ—å‡ºçš„å€¼å¤–å‡è¡¨ç¤ºä¸å…è®¸
  var whiteList = {};

  whiteList['align-content'] = false; // default: auto
  whiteList['align-items'] = false; // default: auto
  whiteList['align-self'] = false; // default: auto
  whiteList['alignment-adjust'] = false; // default: auto
  whiteList['alignment-baseline'] = false; // default: baseline
  whiteList['all'] = false; // default: depending on individual properties
  whiteList['anchor-point'] = false; // default: none
  whiteList['animation'] = false; // default: depending on individual properties
  whiteList['animation-delay'] = false; // default: 0
  whiteList['animation-direction'] = false; // default: normal
  whiteList['animation-duration'] = false; // default: 0
  whiteList['animation-fill-mode'] = false; // default: none
  whiteList['animation-iteration-count'] = false; // default: 1
  whiteList['animation-name'] = false; // default: none
  whiteList['animation-play-state'] = false; // default: running
  whiteList['animation-timing-function'] = false; // default: ease
  whiteList['azimuth'] = false; // default: center
  whiteList['backface-visibility'] = false; // default: visible
  whiteList['background'] = true; // default: depending on individual properties
  whiteList['background-attachment'] = true; // default: scroll
  whiteList['background-clip'] = true; // default: border-box
  whiteList['background-color'] = true; // default: transparent
  whiteList['background-image'] = true; // default: none
  whiteList['background-origin'] = true; // default: padding-box
  whiteList['background-position'] = true; // default: 0% 0%
  whiteList['background-repeat'] = true; // default: repeat
  whiteList['background-size'] = true; // default: auto
  whiteList['baseline-shift'] = false; // default: baseline
  whiteList['binding'] = false; // default: none
  whiteList['bleed'] = false; // default: 6pt
  whiteList['bookmark-label'] = false; // default: content()
  whiteList['bookmark-level'] = false; // default: none
  whiteList['bookmark-state'] = false; // default: open
  whiteList['border'] = true; // default: depending on individual properties
  whiteList['border-bottom'] = true; // default: depending on individual properties
  whiteList['border-bottom-color'] = true; // default: current color
  whiteList['border-bottom-left-radius'] = true; // default: 0
  whiteList['border-bottom-right-radius'] = true; // default: 0
  whiteList['border-bottom-style'] = true; // default: none
  whiteList['border-bottom-width'] = true; // default: medium
  whiteList['border-collapse'] = true; // default: separate
  whiteList['border-color'] = true; // default: depending on individual properties
  whiteList['border-image'] = true; // default: none
  whiteList['border-image-outset'] = true; // default: 0
  whiteList['border-image-repeat'] = true; // default: stretch
  whiteList['border-image-slice'] = true; // default: 100%
  whiteList['border-image-source'] = true; // default: none
  whiteList['border-image-width'] = true; // default: 1
  whiteList['border-left'] = true; // default: depending on individual properties
  whiteList['border-left-color'] = true; // default: current color
  whiteList['border-left-style'] = true; // default: none
  whiteList['border-left-width'] = true; // default: medium
  whiteList['border-radius'] = true; // default: 0
  whiteList['border-right'] = true; // default: depending on individual properties
  whiteList['border-right-color'] = true; // default: current color
  whiteList['border-right-style'] = true; // default: none
  whiteList['border-right-width'] = true; // default: medium
  whiteList['border-spacing'] = true; // default: 0
  whiteList['border-style'] = true; // default: depending on individual properties
  whiteList['border-top'] = true; // default: depending on individual properties
  whiteList['border-top-color'] = true; // default: current color
  whiteList['border-top-left-radius'] = true; ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.default.getDefaultWhiteList" id="apidoc.element.xss.default.getDefaultWhiteList">
        function <span class="apidocSignatureSpan">xss.default.</span>getDefaultWhiteList
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getDefaultWhiteList() {
  return {
    a:      ['target', 'href', 'title'],
    abbr:   ['title'],
    address: [],
    area:   ['shape', 'coords', 'href', 'alt'],
    article: [],
    aside:  [],
    audio:  ['autoplay', 'controls', 'loop', 'preload', 'src'],
    b:      [],
    bdi:    ['dir'],
    bdo:    ['dir'],
    big:    [],
    blockquote: ['cite'],
    br:     [],
    caption: [],
    center: [],
    cite:   [],
    code:   [],
    col:    ['align', 'valign', 'span', 'width'],
    colgroup: ['align', 'valign', 'span', 'width'],
    dd:     [],
    del:    ['datetime'],
    details: ['open'],
    div:    [],
    dl:     [],
    dt:     [],
    em:     [],
    font:   ['color', 'size', 'face'],
    footer: [],
    h1:     [],
    h2:     [],
    h3:     [],
    h4:     [],
    h5:     [],
    h6:     [],
    header: [],
    hr:     [],
    i:      [],
    img:    ['src', 'alt', 'title', 'width', 'height'],
    ins:    ['datetime'],
    li:     [],
    mark:   [],
    nav:    [],
    ol:     [],
    p:      [],
    pre:    [],
    s:      [],
    section:[],
    small:  [],
    span:   [],
    sub:    [],
    sup:    [],
    strong: [],
    table:  ['width', 'border', 'align', 'valign'],
    tbody:  ['align', 'valign'],
    td:     ['width', 'rowspan', 'colspan', 'align', 'valign'],
    tfoot:  ['align', 'valign'],
    th:     ['width', 'rowspan', 'colspan', 'align', 'valign'],
    thead:  ['align', 'valign'],
    tr:     ['rowspan', 'align', 'valign'],
    tt:     [],
    u:      [],
    ul:     [],
    video:  ['autoplay', 'controls', 'loop', 'preload', 'src', 'height', 'width']
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.default.onIgnoreTag" id="apidoc.element.xss.default.onIgnoreTag">
        function <span class="apidocSignatureSpan">xss.default.</span>onIgnoreTag
        <span class="apidocSignatureSpan">(tag, html, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function onIgnoreTag(tag, html, options) {
  // do nothing
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.default.onIgnoreTagAttr" id="apidoc.element.xss.default.onIgnoreTagAttr">
        function <span class="apidocSignatureSpan">xss.default.</span>onIgnoreTagAttr
        <span class="apidocSignatureSpan">(tag, name, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function onIgnoreTagAttr(tag, name, value) {
  // do nothing
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.default.onIgnoreTagStripAll" id="apidoc.element.xss.default.onIgnoreTagStripAll">
        function <span class="apidocSignatureSpan">xss.default.</span>onIgnoreTagStripAll
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function onIgnoreTagStripAll() {
  return '';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.default.onTag" id="apidoc.element.xss.default.onTag">
        function <span class="apidocSignatureSpan">xss.default.</span>onTag
        <span class="apidocSignatureSpan">(tag, html, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function onTag(tag, html, options) {
  // do nothing
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.default.onTagAttr" id="apidoc.element.xss.default.onTagAttr">
        function <span class="apidocSignatureSpan">xss.default.</span>onTagAttr
        <span class="apidocSignatureSpan">(tag, name, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function onTagAttr(tag, name, value) {
  // do nothing
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.default.safeAttrValue" id="apidoc.element.xss.default.safeAttrValue">
        function <span class="apidocSignatureSpan">xss.default.</span>safeAttrValue
        <span class="apidocSignatureSpan">(tag, name, value, cssFilter)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function safeAttrValue(tag, name, value, cssFilter) {
  // è½¬æ¢ä¸ºå‹å¥½çš„å±žæ€§å€¼ï¼Œå†åšåˆ¤æ–­
  value = friendlyAttrValue(value);

  if (name === 'href' || name === 'src') {
    // è¿‡æ»¤ href å’Œ src å±žæ€§
    // ä»…å…è®¸ http:// | https:// | mailto: | / | # å¼€å¤´çš„åœ°å€
    value = _.trim(value);
    if (value === '#') return '#';
    if (!(value.substr(0, 7) === 'http://' ||
         value.substr(0, 8) === 'https://' ||
         value.substr(0, 7) === 'mailto:' ||
         value[0] === '#' ||
         value[0] === '/')) {
      return '';
    }
  } else if (name === 'background') {
    // è¿‡æ»¤ background å±žæ€§ ï¼ˆè¿™ä¸ªxssæ¼æ´žè¾ƒè€äº†ï¼Œå¯èƒ½å·²ç»ä¸é€‚ç”¨ï¼‰
    // javascript:
    REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {
      return '';
    }
  } else if (name === 'style') {
    //<span class="apidocCodeCommentSpan"> /*æ³¨é‡Š*/
</span>    /*REGEXP_DEFAULT_ON_TAG_ATTR_3.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_3.test(value)) {
      return '';
    }*/
    // expression()
    REGEXP_DEFAULT_ON_TAG_ATTR_7.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_7.test(value)) {
      return '';
    }
    // url()
    REGEXP_DEFAULT_ON_TAG_ATTR_8.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_8.test(value)) {
      REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;
      if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {
        return '';
      }
    }
    if (cssFilter !== false) {
      cssFilter = cssFilter || defaultCSSFilter;
      value = cssFilter.process(value);
    }
  }

  // è¾“å‡ºæ—¶éœ€è¦è½¬ä¹‰&lt;&gt;"
  value = escapeAttrValue(value);
  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.default.stripBlankChar" id="apidoc.element.xss.default.stripBlankChar">
        function <span class="apidocSignatureSpan">xss.default.</span>stripBlankChar
        <span class="apidocSignatureSpan">(html)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripBlankChar(html) {
  var chars = html.split('');
  chars = chars.filter(function (char) {
    var c = char.charCodeAt(0);
    if (c === 127) return false;
    if (c &lt;= 31) {
      if (c === 10 || c === 13) return true;
      return false;
    }
    return true;
  });
  return chars.join('');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.default.stripCommentTag" id="apidoc.element.xss.default.stripCommentTag">
        function <span class="apidocSignatureSpan">xss.default.</span>stripCommentTag
        <span class="apidocSignatureSpan">(html)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripCommentTag(html) {
  return html.replace(STRIP_COMMENT_TAG_REGEXP, '');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.default.unescapeQuote" id="apidoc.element.xss.default.unescapeQuote">
        function <span class="apidocSignatureSpan">xss.default.</span>unescapeQuote
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function unescapeQuote(str) {
  return str.replace(REGEXP_QUOTE_2, '"');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.xss.parser" id="apidoc.module.xss.parser">module xss.parser</a></h1>


    <h2>
        <a href="#apidoc.element.xss.parser.parseAttr" id="apidoc.element.xss.parser.parseAttr">
        function <span class="apidocSignatureSpan">xss.parser.</span>parseAttr
        <span class="apidocSignatureSpan">(html, onAttr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parseAttr(html, onAttr) {
  'user strict';

  var lastPos = 0;        // å½“å‰ä½ç½®
  var retAttrs = [];      // å¾…è¿”å›žçš„å±žæ€§åˆ—è¡¨
  var tmpName = false;    // ä¸´æ—¶å±žæ€§åç§°
  var len = html.length;  // HTMLä»£ç&nbsp;é•¿åº¦

  function addAttr (name, value) {
    name = _.trim(name);
    name = name.replace(REGEXP_ATTR_NAME, '').toLowerCase();
    if (name.length &lt; 1) return;
    var ret = onAttr(name, value || '');
    if (ret) retAttrs.push(ret);
  };

  // é€ä¸ªåˆ†æžå­—ç¬¦
  for (var i = 0; i &lt; len; i++) {
    var c = html.charAt(i);
    var v, j;
    if (tmpName === false &amp;&amp; c === '=') {
      tmpName = html.slice(lastPos, i);
      lastPos = i + 1;
      continue;
    }
    if (tmpName !== false) {
      // HTMLæ&nbsp;‡ç­¾å†…çš„å¼•å·ä»…å½“å‰ä¸€ä¸ªå­—ç¬¦æ˜¯ç­‰äºŽå·æ—¶æ‰æœ‰æ•ˆ
      if (i === lastPos &amp;&amp; (c === '"' || c === "'") &amp;&amp; html.charAt(i - 1) === '=') {
        j = html.indexOf(c, i + 1);
        if (j === -1) {
          break;
        } else {
          v = _.trim(html.slice(lastPos + 1, j));
          addAttr(tmpName, v);
          tmpName = false;
          i = j;
          lastPos = i + 1;
          continue;
        }
      }
    }
    if (c === ' ') {
      if (tmpName === false) {
        j = findNextEqual(html, i);
        if (j === -1) {
          v = _.trim(html.slice(lastPos, i));
          addAttr(v);
          tmpName = false;
          lastPos = i + 1;
          continue;
        } else {
          i = j - 1;
          continue;
        }
      } else {
        j = findBeforeEqual(html, i - 1);
        if (j === -1) {
          v = _.trim(html.slice(lastPos, i));
          v = stripQuoteWrap(v);
          addAttr(tmpName, v);
          tmpName = false;
          lastPos = i + 1;
          continue;
        } else {
          continue;
        }
      }
    }
  }

  if (lastPos &lt; html.length) {
    if (tmpName === false) {
      addAttr(html.slice(lastPos));
    } else {
      addAttr(tmpName, stripQuoteWrap(_.trim(html.slice(lastPos))));
    }
  }

  return _.trim(retAttrs.join(' '));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.parser.parseTag" id="apidoc.element.xss.parser.parseTag">
        function <span class="apidocSignatureSpan">xss.parser.</span>parseTag
        <span class="apidocSignatureSpan">(html, onTag, escapeHtml)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parseTag(html, onTag, escapeHtml) {
  'user strict';

  var rethtml = '';        // å¾…è¿”å›žçš„HTML
  var lastPos = 0;         // ä¸Šä¸€ä¸ªæ&nbsp;‡ç­¾ç»“æŸä½ç½®
  var tagStart = false;    // å½“å‰æ&nbsp;‡ç­¾å¼€å§‹ä½ç½®
  var quoteStart = false;  // å¼•å·å¼€å§‹ä½ç½®
  var currentPos = 0;      // å½“å‰ä½ç½®
  var len = html.length;   // HTMLé•¿åº¦
  var currentHtml = '';    // å½“å‰æ&nbsp;‡ç­¾çš„HTMLä»£ç&nbsp;
  var currentTagName = ''; // å½“å‰æ&nbsp;‡ç­¾çš„åç§°

  // é€ä¸ªåˆ†æžå­—ç¬¦
  for (currentPos = 0; currentPos &lt; len; currentPos++) {
    var c = html.charAt(currentPos);
    if (tagStart === false) {
      if (c === '&lt;') {
        tagStart = currentPos;
        continue;
      }
    } else {
      if (quoteStart === false) {
        if (c === '&lt;') {
          rethtml += escapeHtml(html.slice(lastPos, currentPos));
          tagStart = currentPos;
          lastPos = currentPos;
          continue;
        }
        if (c === '&gt;') {
          rethtml += escapeHtml(html.slice(lastPos, tagStart));
          currentHtml = html.slice(tagStart, currentPos + 1);
          currentTagName = getTagName(currentHtml);
          rethtml += onTag(tagStart,
                           rethtml.length,
                           currentTagName,
                           currentHtml,
                           isClosing(currentHtml));
          lastPos = currentPos + 1;
          tagStart = false;
          continue;
        }
        // HTMLæ&nbsp;‡ç­¾å†…çš„å¼•å·ä»…å½“å‰ä¸€ä¸ªå­—ç¬¦æ˜¯ç­‰äºŽå·æ—¶æ‰æœ‰æ•ˆ
        if ((c === '"' || c === "'") &amp;&amp; html.charAt(currentPos - 1) === '=') {
          quoteStart = c;
          continue;
        }
      } else {
        if (c === quoteStart) {
          quoteStart = false;
          continue;
        }
      }
    }
  }
  if (lastPos &lt; html.length) {
    rethtml += escapeHtml(html.substr(lastPos));
  }

  return rethtml;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.xss.util" id="apidoc.module.xss.util">module xss.util</a></h1>


    <h2>
        <a href="#apidoc.element.xss.util.forEach" id="apidoc.element.xss.util.forEach">
        function <span class="apidocSignatureSpan">xss.util.</span>forEach
        <span class="apidocSignatureSpan">(arr, fn, scope)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">forEach = function (arr, fn, scope) {
  var i, j;
  if (Array.prototype.forEach) {
    return arr.forEach(fn, scope);
  }
  for (i = 0, j = arr.length; i &lt; j; i++) {
    fn.call(scope, arr[i], i, arr);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    } else {
      return next(tag, html, options);
    }
  },
  remove: function (html) {
    var rethtml = '';
    var lastPos = 0;
    _.<span class="apidocCodeKeywordSpan">forEach</span>(removeList, function (pos) {
      rethtml += html.slice(lastPos, pos[0]);
      lastPos = pos[1];
    });
    rethtml += html.slice(lastPos);
    return rethtml;
  }
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.util.indexOf" id="apidoc.element.xss.util.indexOf">
        function <span class="apidocSignatureSpan">xss.util.</span>indexOf
        <span class="apidocSignatureSpan">(arr, item)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">indexOf = function (arr, item) {
  var i, j;
  if (Array.prototype.indexOf) {
    return arr.indexOf(item);
  }
  for (i = 0, j = arr.length; i &lt; j; i++) {
    if (arr[i] === item) {
      return i;
    }
  }
  return -1;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (typeof(next) !== 'function') {
  next = function () {};
}

var isRemoveAllTag = !Array.isArray(tags);
function isRemoveTag (tag) {
  if (isRemoveAllTag) return true;
  return (_.<span class="apidocCodeKeywordSpan">indexOf</span>(tags, tag) !== -1);
}

var removeList = [];   // è¦åˆ&nbsp;é™¤çš„ä½ç½®èŒƒå›´åˆ—è¡¨
var posStart = false;  // å½“å‰æ&nbsp;‡ç­¾å¼€å§‹ä½ç½®

return {
  onIgnoreTag: function (tag, html, options) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.xss.util.trim" id="apidoc.element.xss.util.trim">
        function <span class="apidocSignatureSpan">xss.util.</span>trim
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trim = function (str) {
  if (String.prototype.trim) {
    return str.trim();
  }
  return str.replace(/(^\s*)|(\s*$)/g, '');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
function safeAttrValue (tag, name, value, cssFilter) {
// è½¬æ¢ä¸ºå‹å¥½çš„å±žæ€§å€¼ï¼Œå†åšåˆ¤æ–­
value = friendlyAttrValue(value);

if (name === 'href' || name === 'src') {
  // è¿‡æ»¤ href å’Œ src å±žæ€§
  // ä»…å…è®¸ http:// | https:// | mailto: | / | # å¼€å¤´çš„åœ°å€
  value = _.<span class="apidocCodeKeywordSpan">trim</span>(value);
  if (value === '#') return '#';
  if (!(value.substr(0, 7) === 'http://' ||
       value.substr(0, 8) === 'https://' ||
       value.substr(0, 7) === 'mailto:' ||
       value[0] === '#' ||
       value[0] === '/')) {
    return '';
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>